/* eslint-disable max-len */
import React from 'react'
import { Spring, animated } from 'react-spring/renderprops'
import { useInView } from 'react-hook-inview'

const min_x = 0
const max_x = 1
const steps = {
  1: { length: 1 },
  2: { length: 1 }
}
const sum = Object.keys( steps ).reduce( ( sum, key ) => sum + parseFloat( steps[key].length || 0 ), 0 )
let start = min_x
Object.keys( steps ).forEach( ( key ) => {
  steps[ key ][`start`] = start
  steps[ key ][`stop`] = start + ( steps[ key ].length / sum )
  start = start + ( steps[ key ].length / sum )
} )

const React_icon = () => {
  // Only show when in view
  const [ref, inView] = useInView( { threshold: 1, } )
  return <div ref={ref} style={ { height: `200pt`, } }>
    <Spring native to={{ x: inView ?  max_x : min_x }}>
      { ( props ) => (
        <svg width="100%" height="100%" viewBox="0 0 200 100" preserveAspectRatio="YMax">
          <animated.path
            style={{
              opacity: props.x
                .interpolate( { range: [min_x, steps[1].start, steps[1].stop, max_x], output: [0, 0, 1, 1] } )
                .interpolate( x => x ),
              position: `absolute`,
              transformOrigin: `23.8867% 50%`,
              transform: props.x
                .interpolate( { range: [min_x, steps[1].start, steps[1].stop, max_x], output: [1, 1, 0, 0] } )
                .interpolate( x => `rotate(${ 360 / 5 * x }deg)` )
            }}
            fill={`var(--color-text)`}
            d="M75,49.33l-2.35-1.46-.06-.63,2-1.89A.79.79,0,0,0,74.32,44l-2.58-1-.18-.62,1.61-2.24A.79.79,0,0,0,72.65,39l-2.72-.45-.3-.56,1.14-2.51a.81.81,0,0,0-.06-.77.78.78,0,0,0-.69-.35l-2.76.09-.4-.49.63-2.69a.8.8,0,0,0-.21-.74.78.78,0,0,0-.74-.21l-2.69.63-.5-.4.1-2.76A.79.79,0,0,0,62.33,27l-2.51,1.14-.57-.3-.44-2.72a.83.83,0,0,0-.48-.61.82.82,0,0,0-.77.09l-2.23,1.61L54.71,26l-1-2.58a.76.76,0,0,0-.58-.5.79.79,0,0,0-.74.23l-1.88,2c-.21,0-.42,0-.63-.06L48.45,22.8a.8.8,0,0,0-.67-.38.82.82,0,0,0-.68.38l-1.45,2.35-.64.06-1.88-2A.77.77,0,0,0,42.4,23a.79.79,0,0,0-.59.5l-1,2.58c-.2.06-.41.11-.61.18L38,24.61a.81.81,0,0,0-.77-.09.8.8,0,0,0-.47.61l-.45,2.72-.57.3L33.22,27a.79.79,0,0,0-.77.06.81.81,0,0,0-.35.69l.1,2.76-.49.4L29,30.29a.78.78,0,0,0-.74.21.75.75,0,0,0-.21.74l.63,2.69c-.14.16-.27.33-.4.49l-2.77-.09a.78.78,0,0,0-.68.35.79.79,0,0,0-.06.77L25.93,38l-.3.57L22.9,39a.76.76,0,0,0-.6.48.77.77,0,0,0,.09.76L24,42.45c-.07.2-.13.41-.19.62l-2.58,1a.83.83,0,0,0-.5.59.79.79,0,0,0,.24.73l2,1.89q0,.32-.06.63l-2.35,1.46a.78.78,0,0,0,0,1.34l2.35,1.46q0,.32.06.63l-2,1.89a.79.79,0,0,0-.24.73.83.83,0,0,0,.5.59l2.58,1c.06.21.12.42.19.62l-1.61,2.24a.77.77,0,0,0-.09.76.76.76,0,0,0,.6.48l2.73.45.3.56-1.14,2.51a.79.79,0,0,0,.06.77.74.74,0,0,0,.68.35l2.77-.09c.13.16.26.33.4.49l-.63,2.69a.79.79,0,0,0,.95.95l2.69-.63.49.4-.1,2.76a.81.81,0,0,0,.35.69.79.79,0,0,0,.77.06l2.51-1.14.57.3.45,2.72a.8.8,0,0,0,.47.61.81.81,0,0,0,.77-.09l2.24-1.61c.2.07.41.12.61.18l1,2.58a.79.79,0,0,0,.59.5.77.77,0,0,0,.73-.23l1.88-2,.64.06L47.1,77.2a.82.82,0,0,0,.68.38.8.8,0,0,0,.67-.38l1.46-2.35.63-.06,1.88,2a.79.79,0,0,0,.74.23.76.76,0,0,0,.58-.5l1-2.58.62-.18,2.23,1.61a.82.82,0,0,0,.77.09.83.83,0,0,0,.48-.61l.44-2.72.57-.3L62.33,73a.79.79,0,0,0,1.12-.75l-.1-2.76.5-.4,2.69.63a.78.78,0,0,0,.74-.21.8.8,0,0,0,.21-.74l-.63-2.69.4-.49,2.76.09a.78.78,0,0,0,.69-.35.81.81,0,0,0,.06-.77l-1.14-2.5.3-.57L72.65,61a.79.79,0,0,0,.52-1.24l-1.61-2.24.18-.62,2.58-1a.79.79,0,0,0,.26-1.32l-2-1.89.06-.63L75,50.67a.79.79,0,0,0,0-1.34ZM62.28,63.87l-.11.11-3.46-.75a1.5,1.5,0,0,0-1.78,1.15l-.82,3.84h0c-.23.11-.46.2-.69.3l-.35.14-.59.21.29-.1-.4.15.11-.05L54.2,69l-.05,0c-.23.07-.46.15-.69.21l-.25.07-.41.11-.49.12-.34.08.27-.06-.55.12.28-.06-.33.07-.69.12-.62.08.57-.07-.58.08h0l-.67.07L49,70l-1,0h-.24a20,20,0,0,1-8.47-1.89l-.82-3.83a1.49,1.49,0,0,0-1.77-1.15l-3.39.73a20.14,20.14,0,0,1-5.7-14V49.8a20,20,0,0,1,.13-2.21l0,.08L31.42,46a1.32,1.32,0,0,0,.64-1.75l-2-4.16A20.24,20.24,0,0,1,44.05,30l2.51,2.63a1.49,1.49,0,0,0,2.11.05L51.48,30a20.17,20.17,0,0,1,13.84,9.84l-1.93,4.36a1.51,1.51,0,0,0,.76,2l3.72,1.65c.06.62.1,1.26.1,1.9V50a20.08,20.08,0,0,1-4.91,13c-.28.32-.58.65-.89,1ZM61.48,67a1.63,1.63,0,0,1-3.26.17,1,1,0,0,1,0-.17,1.64,1.64,0,0,1,1.64-1.65h0a1.46,1.46,0,0,1,.66.16A1.64,1.64,0,0,1,61.48,67Zm-24.3-.08s0,.09,0,.14a1.64,1.64,0,1,1-2.29-1.64,1.59,1.59,0,0,1,.66-.14h.05A1.64,1.64,0,0,1,37.18,66.87ZM27,44.9l0,0-.17-.21-.05-.09a1.14,1.14,0,0,1-.1-.19s0-.1-.05-.16,0-.09,0-.14a1.84,1.84,0,0,1,0-.33,1.65,1.65,0,0,1,1.64-1.64h.05a1.26,1.26,0,0,1,.28,0l.1,0,.15,0a1.68,1.68,0,0,1,.3.15,1.64,1.64,0,0,1-.88,3h-.05A1.64,1.64,0,0,1,27,44.9Zm19.1-16a1.64,1.64,0,0,1,1.64-1.64h.05a1.63,1.63,0,0,1,1.59,1.64,1.55,1.55,0,0,1-.2.77,1.61,1.61,0,0,1-1.44.87,1.63,1.63,0,0,1-1.43-.86A1.57,1.57,0,0,1,46.05,28.91ZM67.49,45.45a1.6,1.6,0,0,1-.23,0,1.64,1.64,0,0,1-1.64-1.64,1.66,1.66,0,0,1,.92-1.48,1.73,1.73,0,0,1,.72-.17h0a1.65,1.65,0,0,1,1.6,1.65A1.63,1.63,0,0,1,67.49,45.45Z"
          />
          <animated.path
            style={{
              opacity: props.x
                .interpolate( { range: [min_x, steps[2].start, steps[2].stop, max_x], output: [0, 0, 1, 1] } )
                .interpolate( x => x ),
            }}
            fill={`var(--color-text)`}
            d="M29.57,42.46h4.55v12.9l-6.43-.07,1.2,6.52H48c.18,0,.31,0,.31-.2V55.77c0-.17-.13-.21-.31-.21H43.2v-3.7h5.22a3.28,3.28,0,0,1,3.21,2.79c.21.81.66,3.46,1,4.31s1.57,2.85,2.91,2.85H65.67l3.55-10.49H65.84c-.2,0-.29.14-.29.34v1c0,2.24-1.26,2.73-2.37,2.85S61,55,60.81,54.38c-.62-3.5-1.65-4.25-3.29-5.54,2-1.29,4.14-3.19,4.14-5.74a6.49,6.49,0,0,0-3.16-5.33,9,9,0,0,0-4.34-1.42H30.25Zm20,3.94H43.2V42.6H50c.36,0,2.49.4,2.49,2C52.5,45.93,50.86,46.4,49.52,46.4Z"
          />
          <animated.g
            fill={`var(--color-text)`}
            style={
              {
                opacity: props.x
                  .interpolate( { range: [min_x, max_x], output: [0, 1] } )
                  .interpolate( x => x ),
              }
            }
          >
            <path d="M86.72,57.85h1.8V41.65h-1.8V35.74h16.53c3.09,0,5.46.64,7.09,1.91s2.45,3.34,2.45,6.19a8.63,8.63,0,0,1-1,4.18A5.23,5.23,0,0,1,109,50.47l0,.36c2.3.36,3.46,1.77,3.46,4.25v2.77h1.69v5.9H102.82V55.29a4.29,4.29,0,0,0-.42-2.12,2,2,0,0,0-1.29-1,9.52,9.52,0,0,0-2.51-.26v5.91H101v5.9H86.72Zm13.83-10.3a2,2,0,0,0,1.56-.56,2.46,2.46,0,0,0,.53-1.74V44a2.46,2.46,0,0,0-.53-1.74,2,2,0,0,0-1.56-.56h-2v5.9Z" />
            <path d="M139.14,57.85v5.9h-9.86V60.94a7.93,7.93,0,0,1-6.48,3.32,5.4,5.4,0,0,1-4.49-1.88,8,8,0,0,1-1.49-5.14v-7.6h-1.58v-5.9h9.86v11.8a2.47,2.47,0,0,0,.52,1.75,2.06,2.06,0,0,0,1.57.56,2,2,0,0,0,1.56-.56,2.47,2.47,0,0,0,.53-1.75v-5.9h-2v-5.9h10.23V57.85Z" />
            <path d="M140.15,62.82V57.49H146v.36c0,1.15.73,1.73,2.2,1.73,1.29,0,1.94-.45,1.94-1.34a1.21,1.21,0,0,0-.56-1.08,5.78,5.78,0,0,0-2-.61l-1.8-.32q-5.66-1-5.65-6.41A5.66,5.66,0,0,1,142.52,45a10.71,10.71,0,0,1,6.41-1.73,17.36,17.36,0,0,1,7.6,1.51v5h-5.47v-.36a1.32,1.32,0,0,0-.49-1.1,2.29,2.29,0,0,0-1.42-.38c-1.2,0-1.8.39-1.8,1.15a1.06,1.06,0,0,0,.5.94,6,6,0,0,0,1.84.61l2.05.4a7.52,7.52,0,0,1,4.57,2.27,6.45,6.45,0,0,1,1.37,4.24,5.88,5.88,0,0,1-2.29,5,10.6,10.6,0,0,1-6.49,1.73A26.85,26.85,0,0,1,140.15,62.82Z" />
            <path d="M162,62.4c-1.28-1.23-1.92-3.32-1.92-6.24V49.64h-1.59v-5.9a2.73,2.73,0,0,0,2.05-.71,2.61,2.61,0,0,0,.69-1.92V39.49h7.63v4.25h4.86v5.9h-4.86v5.9a2.47,2.47,0,0,0,.52,1.75,2.06,2.06,0,0,0,1.57.56,15.08,15.08,0,0,0,3-.33v5.66a16.55,16.55,0,0,1-2.72.73,17.56,17.56,0,0,1-3.48.35Q163.91,64.26,162,62.4Z" />
          </animated.g>
        </svg>
      ) }
    </Spring>
  </div>
}

export default React_icon